@model IEnumerable<Game.Models.Hero>

@{
    ViewBag.Title = "Список персонажей";
    //Layout = null;
}

<h2>Персонажи</h2>

<p>
    <link href='@Url.Content("~/Content/themes/base/jquery-ui.css")' rel="stylesheet" type="text/css" />
    @Html.ActionLink("Создать нового", "Create",new { }, new { @class = "viewDialog", data_dialog_title = "Создание Персонажа" })
    
</p>

<div id="wrap" style="display: block;">
    <div id="showcase" class="noselect"> 
        @foreach (var item in Model)
        {
            <div class="cloud9-item">
                <h2 class="hero-title">@item.Name - Уровень @item.Level</h2>
                <div class="hero-info-container">
                    <span class="characteristic-item" style="text-align: center; font-weight: bold;">Характеристики</span>
                    <span class="characteristic-item">Атака: @item.Attack</span>
                    <span class="characteristic-item">Здоровье: @item.Health</span>
                    <span class="characteristic-item">Защита: @item.Protection</span>
                    <span class="characteristic-item">Уворот: @item.Evasion%</span>
                    <span class="characteristic-item">Крит: @item.Crit%</span>
                </div>
                <img src=@Url.Content(@item.Picture) alt="@item.Name">
                </div>
        }

    </div>
    
    <div class="nav" class="noselect">
        <span class="left"></span>
        <span class="right"></span>
    </div>
</div>

<table class="table" style="margin-top: 50px;">
        <tr>
            <th>

                @Html.DisplayNameFor(model => model.User.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Level)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FreePoints)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Experience)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Health)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Protection)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Attack)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Evasion)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Crit)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Picture)
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Level)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FreePoints)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Experience)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Health)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Protection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Attack)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Evasion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Crit)
            </td>
            <td>
                   <img src="@Url.Content(item.Picture)" style="max-height:50px;max-height:50px;">
            </td>
            <td>
                @Html.ActionLink("Редактировать", "Edit", new { id=item.Id },new { @class= "viewDialog" }) |
                @Html.ActionLink("Просмотреть", "Details", new { id = item.Id }, new { @class = "viewDialog" }) |
                @Html.ActionLink("Удалить", "Delete", new { id=item.Id }, new { @class = "viewDialog" })|
                @Html.ActionLink("Характеристики", "Characteristic", new { id = item.Id }/*, new { @class = "viewDialog" }*/)|

            </td>
        </tr>

    }

    </table>

@Styles.Render("~/Content/slider.css")

<script src="~/Scripts/jquery-1.12.4.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery-ui-1.12.1.js" type="text/javascript"></script>
<script src="~/Scripts/Custom/ModalView.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.reflection.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.cloud9carousel.js" type="text/javascript"></script>
<script>
    $(function () {
        var showcase = $("#showcase")

        showcase.Cloud9Carousel({
            yPos: 42,
            yRadius: 48,
            mirrorOptions: {
                gap: 12,
                height: 0.2
            },
            buttonLeft: $(".nav > .left"),
            buttonRight: $(".nav > .right"),
            autoPlay: false,
            bringToFront: true,
            onRendered: showcaseUpdated,
            onLoaded: function () {
                showcase.css('visibility', 'visible')
                showcase.css('display', 'none')
                showcase.fadeIn(1500)
            }
        })

        function showcaseUpdated(showcase) {
 
            showcase.items.forEach(function (item, i, arr) {
                item.element.setAttribute("class","cloud9-item");
            });
            var selectedItem = $(showcase.nearestItem())[0].element;
            selectedItem.setAttribute("class", "cloud9-item selectedItem");

        }

        // Simulate physical button click effect
        $('.nav > button').click(function (e) {
            var b = $(e.target).addClass('down')
            setTimeout(function () { b.removeClass('down') }, 80)
        })

        $(document).keydown(function (e) {
            //
            // More codes: http://www.javascripter.net/faq/keycodes.htm
            //
            switch (e.keyCode) {
                /* left arrow */
                case 37:
                    $('.nav > .left').click()
                    break

                /* right arrow */
                case 39:
                    $('.nav > .right').click()
            }
        })
    })
</script> 